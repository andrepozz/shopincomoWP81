<!DOCTYPE html>
<html>
<head>
	<title>Page Title</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, target-densitydpi=medium-dpi, user-scalable=0" />
	<link rel="stylesheet" href="css/themes/shopincomo.min.css" />
	<link rel="stylesheet" href="css/themes/jquery.mobile.icons.min.css" />
	<link rel="stylesheet" href="css/jquery.mobile.structure-1.4.2.min.css" />
	
	<link rel="stylesheet" href="css/template.css" />
	
	<script src="js/jquery-1.11.0.min.js"></script>
	<script src="js/jquery.mobile-1.4.2.min.js"></script>
	
	<script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript" src="js/function_checkConnection.js"></script>
	<!-- cordova facebook plugin -->
	<script src="cdv-plugin-fb-connect.js"></script>
	<!-- facebook js sdk -->
	<script src="facebook-js-sdk.js"></script>
</head>
<body>

<!-- PAGE #opzioni -->
		<div data-role="page" id="opzioni">

		<!-- /HEADER -->
		<div data-role="header" data-position="fixed" data-tap-toggle="false">
		<h1></h1>
		<a href="index.html" rel="external" class="ui-btn ui-icon-home ui-btn-icon-notext ui-alt-icon ui-nodisc-icon" data-transition="slide" data-direction="reverse">indietro</a>
		</div>
		<!-- /HEADER -->
	
		<!-- CONTENT -->
		<div role="main" class="ui-content" >
		
		<script>
		
		$( "#opzioni" ).on( "pagebeforeshow", function() {
		
		document.addEventListener("backbutton", onBackKeyDown, false);
		
		function onBackKeyDown(e) {
		e.preventDefault();
		}
				
		$("ul.opzioni").html("");
		$("ul.opzioni").append($('<li><a href="#socialNetworks" data-transition="slide"><h2>Social Networks</h2><p>Login/Logout Social Network account</p></a></li>'));
		$("ul.opzioni").append($('<li><a href="#lingua" data-transition="slide"><h2>'+window.localStorage.getItem("linguaApp")+'</h2><p>'+window.localStorage.getItem("cambiaLinguaApp")+'</p></a></li>'));
		$("ul.opzioni").append($('<li><a href="#database" data-transition="slide"><h2>Database ('+window.localStorage.getItem("numeroAggiornamenti")+')</h2><p>'+window.localStorage.getItem("aggiornaDatabaseApp")+'</p></a></li>'));
		$("ul.opzioni").listview("refresh");
		
		});
		
		</script>
		
		<ul class="opzioni" data-role="listview" data-inset="true">
		</ul>
		
		
		</div>
		<!-- /CONTENT -->

		<!-- FOOTER -->
		<div data-role="footer" data-theme="a" data-position="fixed"><h4></h4></div>
		<!-- /FOOTER -->
		
		</div>
<!-- /PAGE #opzioni -->

<!-- PAGE #socialNetworks -->
		<div data-role="page" id="socialNetworks">

		<!-- /HEADER -->
		<div data-role="header">
		<h1></h1>
		<a href="#opzioni" class="ui-btn ui-icon-gear ui-btn-icon-notext ui-alt-icon ui-nodisc-icon" data-transition="slide" data-direction="reverse">indietro</a>
		</div>
		<!-- /HEADER -->
	
		<!-- CONTENT -->
		<div role="main" class="ui-content" >
		
		<script>
		$( "#socialNetworks" ).on( "pagebeforeshow", function() {	
		
		document.addEventListener("backbutton", onBackKeyDown, false);
		
		function onBackKeyDown(e) {
		e.preventDefault();
		}
		
		$("p.descrizioneOffline").html(window.localStorage.getItem("essereOnline"));
		$("a.closePopup").html(window.localStorage.getItem("chiudi"));
		
		
		if (device.platform === "Android") {
			$("ul.listaSocialNetwork").html("");
			$("ul.listaSocialNetwork").append($('<li><a href="#" class="collegaFacebook" data-transition="slide"><img src="img/facebookList.png" alt="Facebook" class="imageFacebook ui-li-icon ui-corner-none">Facebook<p class="accountFacebook"></p></a></li>'));
			$("ul.listaSocialNetwork").append($('<li><a href="#" class="collegaFoursquare" data-transition="slide"><img src="img/foursquareList.png" alt="Foursquare" class="imageFoursquare ui-li-icon ui-corner-none">Foursquare<p class="accountFoursquare"></p></a></li>'));
			$("ul.listaSocialNetwork").append($('<li><a href="#" class="collegaTwitter" data-transition="slide"><img src="img/twitterList.png" alt="Twitter" class="imageTwitter ui-li-icon ui-corner-none">Twitter<p class="accountTwitter"></p></a></li>'));
			$("ul.listaSocialNetwork").listview("refresh");
		}
						
		if (device.platform === "WinCE" || device.platform === "Win32NT") {
			$("ul.listaSocialNetwork").html("");
			$("ul.listaSocialNetwork").append($('<li><a href="#" class="collegaFoursquare" data-transition="slide"><img src="img/foursquareList.png" alt="Foursquare" class="imageFoursquare ui-li-icon ui-corner-none">Foursquare<p class="accountFoursquare"></p></a></li>'));
			$("ul.listaSocialNetwork").append($('<li><a href="#" class="collegaTwitter" data-transition="slide"><img src="img/twitterList.png" alt="Twitter" class="imageTwitter ui-li-icon ui-corner-none">Twitter<p class="accountTwitter"></p></a></li>'));
			$("ul.listaSocialNetwork").listview("refresh");	
		}
								
		if (device.platform === "iOS") {
			$("ul.listaSocialNetwork").html("");
			$("ul.listaSocialNetwork").append($('<li><a href="#" class="collegaFacebook" data-transition="slide"><img src="img/facebookList.png" alt="Facebook" class="imageFacebook ui-li-icon ui-corner-none">Facebook<p class="accountFacebook"></p></a></li>'));
			$("ul.listaSocialNetwork").append($('<li><a href="#" class="collegaFoursquare" data-transition="slide"><img src="img/foursquareList.png" alt="Foursquare" class="imageFoursquare ui-li-icon ui-corner-none">Foursquare<p class="accountFoursquare"></p></a></li>'));
			$("ul.listaSocialNetwork").append($('<li><a href="#" class="collegaTwitter" data-transition="slide"><img src="img/twitterList.png" alt="Twitter" class="imageTwitter ui-li-icon ui-corner-none">Twitter<p class="accountTwitter"></p></a></li>'));
			$("ul.listaSocialNetwork").listview("refresh");	
		}

		if (device.platform === "iOS" || device.platform === "Android") {
		//FACEBOOK
			FB.init({ appId: "771666006185274", nativeInterface: CDV.FB, useCachedDialogs: false });
			//GET LOGIN STATUS
			FB.getLoginStatus(function(response) {
				//CONNESSO
				if (response.status === 'connected') {
				$("img.imageFacebook").attr("src", "img/facebookList.png");
					
					FB.api('/me', function(response) {
					sessionStorage.setItem("idFacebook", response.id);
					$("p.accountFacebook").html(response.name);
					});
				}
				//APP NON AUTORIZZATA
				else if (response.status === 'not_authorized') {
				$("img.imageFacebook").attr("src", "img/facebookListbn.png");
				} 
				//NON CONNESSO
				else {
				$("img.imageFacebook").attr("src", "img/facebookListbn.png");
				}
			}, true);
		}
		//FOURSQUARE
		var tokenFoursquare = window.localStorage.getItem("tokenFoursquare");
	
			if(tokenFoursquare == null) {
			$("img.imageFoursquare").attr("src", "img/foursquareListbn.png");
			}
			else {
				
				$.getJSON('https://api.foursquare.com/v2/users/self?oauth_token='+tokenFoursquare+'&v=20140304', function(data){
				var user = data['response']['user']['firstName'];
				$("img.imageFoursquare").attr("src", "img/foursquareList.png");
				$("p.accountFoursquare").html(user);
				});
			}
		
		//TWITTER
		var twitterToken = window.localStorage.getItem("twitterToken");
	
			if(twitterToken == null) {
			$("img.imageTwitter").attr("src", "img/twitterListbn.png");
			}
			else {
			$("img.imageTwitter").attr("src", "img/twitterList.png");
			$("p.accountTwitter").html(localStorage.getItem("twitterName"));
			}
		

		
		}); //ON "pagebeforeshow"
		
		//TWITTER
		$(document).on("click", 'a.collegaTwitter', function(){
		
		var	connectionStatus = navigator.onLine ? 'online' : 'offline';
		if (connectionStatus == "online")
		{
		twitterToken = window.localStorage.getItem("twitterToken");
		
		if(twitterToken == null) {
			
			var ref = window.open('http://shopincomo.comune.como.it/twitter/twitterConnect.php', '_blank', 'location=no');
			ref.addEventListener('loadstart', function(event) {
			closeTwitter(event.url,ref);
			});  
	
			function closeTwitter(loc,ref) {
   
				if (loc.indexOf("shopincomo.comune.como.it/twitter/twitterTokens.php?") > -1){
				var twitterToken = loc.substring(loc.indexOf("oauth_token=")+12, loc.indexOf("&"));
				var twitterVerifier = loc.substring(loc.indexOf("oauth_verifier=")+15, loc.indexOf("&t"));
				var twitterName = loc.substring(loc.indexOf("twitterName=")+12, loc.indexOf("&i"));
				var idTwitter = loc.substring(loc.indexOf("idTwitter=")+10);
				localStorage.setItem("idTwitter", idTwitter);
				twitterName = decodeURIComponent(twitterName);
				
				if(twitterToken !== "") {
				window.localStorage.setItem("twitterToken", twitterToken);
				window.localStorage.setItem("twitterVerifier", twitterVerifier);
				window.localStorage.setItem("twitterName", twitterName);
		
				$("img.imageTwitter").attr("src", "img/twitterList.png");
				$("p.accountTwitter").html(twitterName);

				$.ajax({
				type: 'POST',
				url: 'http://shopincomo.comune.como.it/ccn20/utentiSocial.php',
				data: { idUtente: idTwitter, socialNetwork: 'Twitter'}
				}).done(function( msg ) {
				//alert(window.localStorage.getItem("postPubblicato"));
				});	

				}
				
				ref.close();
				}
			}
		}
		else {
		localStorage.removeItem("twitterToken");
		localStorage.removeItem("twitterVerifier");
		localStorage.removeItem("twitterName");
		$("img.imageTwitter").attr("src", "img/twitterListbn.png");
		$("p.accountTwitter").html("");
		}
		}
		else{
		$( "#connectionOfflineSocial" ).popup("open");
		}
		
		});
		
		//FOURSQUARE
		$(document).on("click", 'a.collegaFoursquare', function(){
		
		var	connectionStatus = navigator.onLine ? 'online' : 'offline';
		if (connectionStatus == "online")
		{
		
			tokenFoursquare = window.localStorage.getItem("tokenFoursquare");
			if(tokenFoursquare == null) {
			
				var ref = window.open('https://foursquare.com/oauth2/authenticate?client_id=OEAMDK1KRKXV2ZMYSFC5GMV3WZRPNSXDPHTGOUHFKPQLQ0VH&response_type=token&redirect_uri=http://shopincomo.comune.como.it/ccn20/closeFoursquare.html', '_blank', 'location=no');
				ref.addEventListener('loadstart', function(event) {
				closeFoursquare(event.url,ref);
				}); 
			}
			else {
			localStorage.removeItem("tokenFoursquare");
			$("img.imageFoursquare").attr("src", "img/foursquareListbn.png");
			$("p.accountFoursquare").html("");
			}
		
			function closeFoursquare(loc,ref) {
   
			if (loc.indexOf("shopincomo.comune.como.it/ccn20/closeFoursquare.html#") > -1){
			var tokenFoursquare = loc.substring(loc.indexOf("=")+1);
			window.localStorage.setItem("tokenFoursquare", tokenFoursquare);
			
				$.getJSON('https://api.foursquare.com/v2/users/self?oauth_token='+tokenFoursquare+'&v=20140304', function(data){
				var user = data['response']['user']['firstName'];
				var idFoursquare = data['response']['user']['id'];
				localStorage.setItem("idFoursquare", idFoursquare);
				$("img.imageFoursquare").attr("src", "img/foursquareList.png");
				$("p.accountFoursquare").html(user);
							
				$.ajax({
				type: 'POST',
				url: 'http://shopincomo.comune.como.it/ccn20/utentiSocial.php',
				data: { idUtente: idFoursquare, socialNetwork: 'Foursquare'}
				}).done(function( msg ) {
				//alert(window.localStorage.getItem("postPubblicato"));
				});	

				});
				
			ref.close();
			}
		}

		}
		else{
		$( "#connectionOfflineSocial" ).popup("open");
		}
		
		}); //ON "click" button.foursquareLogin
		
		//FACEBOOK
		$(document).on("click", 'a.collegaFacebook', function(){
		
		var	connectionStatus = navigator.onLine ? 'online' : 'offline';
		if (connectionStatus == "online")
		{
		
			//GET LOGIN STATUS
			FB.getLoginStatus(function(response) {
				//CONNESSO
				if (response.status === 'connected') {
					FB.logout(function(response) {
					$("img.imageFacebook").attr("src", "img/facebookListbn.png");
					$("p.accountFacebook").html("");
					});
				}
				//APP NON AUTORIZZATA
				else if (response.status === 'not_authorized') {
					FB.login(function(response) {      
						if (response.authResponse) {
						
							FB.api('/me', function(response) {
							$("img.imageFacebook").attr("src", "img/facebookList.png");
							var idFacebook = response.id;
							sessionStorage.setItem("idFacebook", idFacebook);
							$("p.accountFacebook").html(response.name);

							$.ajax({
							type: 'POST',
							url: 'http://shopincomo.comune.como.it/ccn20/utentiSocial.php',
							data: { idUtente: idFacebook, socialNetwork: 'Facebook'}
							}).done(function( msg ) {
							//alert(window.localStorage.getItem("postPubblicato"));
							});	

							});
						}
						else {
						alert('not logged in');
						}
					},
					{ scope: "email" }
					);
				} 
				//NON CONNESSO
				else {
					FB.login(function(response) {      
						if (response.authResponse) {
							
							FB.api('/me', function(response) {
							$("img.imageFacebook").attr("src", "img/facebookList.png");
							var idFacebook = response.id;
							localStorage.setItem("idFacebook", idFacebook);
							$("p.accountFacebook").html(response.name);

							$.ajax({
							type: 'POST',
							url: 'http://shopincomo.comune.como.it/ccn20/utentiSocial.php',
							data: { idUtente: idFacebook, socialNetwork: 'Facebook'}
							}).done(function( msg ) {
							//alert(window.localStorage.getItem("postPubblicato"));
							});	
							});
						}
						else {
						alert('not logged in');
						}
					},
					{ scope: "email" }
					);
				}
			}, true);
			
		}
		else{
		$( "#connectionOfflineSocial" ).popup("open");
		}
		
		}); //ON "click" button.facebookLogin
		
		$(document).on("click", 'a.closePopup', function(){
		
		$( "#connectionOfflineSocial" ).popup("close");
		
		});
		
		</script>
		
		<ul data-role="listview" class="listaSocialNetwork"data-inset="true">
		</ul>
		
		<div data-role="popup" id="connectionOfflineSocial" data-dismissible="false" data-history="false">
		<p class="headerOffline">OFFLINE</p>
        <p class="descrizioneOffline"></p>
		<a href="#" class="ui-btn closePopup"></a>
		</div>
	
		</div>
		<!-- /CONTENT -->

		<!-- FOOTER -->
		<div data-role="footer" data-theme="a" data-position="fixed"><h4></h4></div>
		<!-- /FOOTER -->
		
		</div>
<!-- /PAGE #socialNetworks -->

<!-- PAGE #lingua -->
		<div data-role="page" id="lingua">

		<!-- /HEADER -->
		<div data-role="header" data-position="fixed" data-tap-toggle="false">
		<h1></h1>
		<a href="#opzioni" class="ui-btn ui-icon-gear ui-btn-icon-notext ui-alt-icon ui-nodisc-icon" data-transition="slide" data-direction="reverse">indietro</a>
		</div>
		<!-- /HEADER -->
	
		<!-- CONTENT -->
		<div role="main" class="ui-content" >
	
		<script>
	$( "#lingua" ).on( "pageshow", function() {	
	
	document.addEventListener("backbutton", onBackKeyDown, false);
		
		function onBackKeyDown(e) {
		e.preventDefault();
		}
	
	//LISTA LINGUE
	$("ul#listaLingue").html("");
	
		var fileLingueJson = '{"Italiano":{"idLingua":"1","codiceLingua":"it","nomeLingua":"Italiano","nome":"Nome","nomiEsercizi":"nomiEsercizi","categorie":"categorie","esercizi":"esercizi","position":"posizioneEsercizi","sottoCategorie":"sottocategorie","brandEsercizi":"brandEsercizi","downloadFunzionalita":"Download funzionalit\u00e0","downloadEsercizi":"Download Esercizi","attendere":"attendere","continua":"Continua","localizzando":"Localizzando","noLocalizzazione":"Non \u00e8 stato possibile localizzarti. La tua posizione verr\u00e0 impostata di default al centro di Como","salta":"Salta","chiudi":"Chiudi","vota":"Vota","voti":"Voti","essereOnline":"Bisogna essere collegati in WiFi o 3g per usare questa funzionalit\u00e0","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distanza","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"Tutti","giorni":"giorni","noStatistiche":"Il negoziante non permette la visualizzazione pubblica delle statistiche","contatti":"Contatti","telefono":"Telefono","orariApertura":"Orari di apertura","noOrari":"Orari di apertura non comunicati","lunedi":"Luned\u00ec","martedi":"Marted\u00ec","mercoledi":"Mercoled\u00ec","giovedi":"Gioved\u00ec","venerdi":"Venerd\u00ec","sabato":"Sabato","domenica":"Domenica","votaNegozio":"Vota il negozio","portamiQui":"Portami qui","mostra":"mostra","nascondi":"nascondi","postPubblicato":"Post pubblicato","tweetPubblicato":"Tweet pubblicato","checkinPubblicato":"Check-in pubblicato","noCheckin":"Non sei nelle vicinanze di questo negozio!","noRisultatiVicini":"Non ci sono risultati nelle vicinanze","noRisultatiBrand":"Nessun brand corrisponde alla ricerca","noRisultatiNome":"Nessun esercizio corrisponde alla ricerca","vicinoA":"Ora sei vicino a","troppoLontano":"troppo lontano per calcolare","collegaSetupTitolo":"Collegati con","collegaSetupDescrizione":"Puoi collegare ShopInComo con i Social Network per votare i tuoi negozi preferiti","collegaSocial":"Collega ShopInComo al mio account","noCollegaSocial":"Non ora","accountCollegato":"Account Collegato","prossimoPasso":"Prossimo step","placeholderNome":"Inserisci il nome di un negozio (almeno 3 lettere)","placeholderBrand":"Inserisci un brand (almeno 3 lettere)","linguaApp":"Lingua","cambiaLinguaApp":"Cambia lingua","aggiorna":"Aggiorna","aggiornaDatabaseApp":"Aggiorna il database degli esercizi","statusDatabase":"Non sono disponibili aggiornamenti","aggiornamentoCompletato":"Aggiornamento completato","aggiornamentiDisponibili":"Aggiornamenti disponibili","aggiornamentiPopupDescrizione":"Sono disponibili aggiornamenti per gli esercizi"},"English":{"idLingua":"2","codiceLingua":"en","nomeLingua":"English","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Francaise":{"idLingua":"3","codiceLingua":"fr","nomeLingua":"Francaise","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Spanish":{"idLingua":"4","codiceLingua":"es","nomeLingua":"Spanish","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Portuguese":{"idLingua":"5","codiceLingua":"pt","nomeLingua":"Portuguese","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Russian":{"idLingua":"6","codiceLingua":"ru","nomeLingua":"Russian","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Japanese":{"idLingua":"7","codiceLingua":"ja","nomeLingua":"Japanese","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Chinese":{"idLingua":"8","codiceLingua":"zh-hans","nomeLingua":"Chinese","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Arabic":{"idLingua":"9","codiceLingua":"ar","nomeLingua":"Arabic","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"}}';
		var fileLingue = JSON.parse(fileLingueJson);
		
		$.each(fileLingue, function(index, info) {
			$("ul#listaLingue").append($("<li></li>",{"html":"<a href='#' class='lingua' id='" + info.idLingua + "' codiceLingua='"+info.codiceLingua+"' nomeLingua='"+index+"' data-transition='slide' ><img src='img/lingue/"+info.codiceLingua+".png' alt='Facebook' class='ui-li-icon ui-corner-none'>" + info.nomeLingua + "</a>" }));
		});
	
		$("ul#listaLingue").listview("refresh");
	
	}); //ON "pagebeforeshow"
	
	//ON "click"
	$(document).on("click", 'a.lingua', function(){
	
	$("p.descrizioneOffline").html(window.localStorage.getItem("essereOnline"));
	$("a.closePopup").html(window.localStorage.getItem("chiudi"));
	
	
	var	connectionStatus = navigator.onLine ? 'online' : 'offline';
	if (connectionStatus == "online")
	{
	
	idLingua = $(this).attr('id');
	lingua = $(this).attr('nomeLingua');
	codLingua = $(this).attr('codiceLingua');
	
	window.localStorage.setItem("lingua", lingua);
	window.localStorage.setItem("idLingua", idLingua);
	window.localStorage.setItem("codLingua", codLingua);
	
	// TRADUZIONI------------------------------------------------------------------------------
	
	var fileLingueJson = '{"Italiano":{"idLingua":"1","codiceLingua":"it","nomeLingua":"Italiano","nome":"Nome","nomiEsercizi":"nomiEsercizi","categorie":"categorie","esercizi":"esercizi","position":"posizioneEsercizi","sottoCategorie":"sottocategorie","brandEsercizi":"brandEsercizi","downloadFunzionalita":"Download funzionalit\u00e0","downloadEsercizi":"Download Esercizi","attendere":"attendere","continua":"Continua","localizzando":"Localizzando","noLocalizzazione":"Non \u00e8 stato possibile localizzarti. La tua posizione verr\u00e0 impostata di default al centro di Como","salta":"Salta","chiudi":"Chiudi","vota":"Vota","voti":"Voti","essereOnline":"Bisogna essere collegati in WiFi o 3g per usare questa funzionalit\u00e0","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distanza","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"Tutti","giorni":"giorni","noStatistiche":"Il negoziante non permette la visualizzazione pubblica delle statistiche","contatti":"Contatti","telefono":"Telefono","orariApertura":"Orari di apertura","noOrari":"Orari di apertura non comunicati","lunedi":"Luned\u00ec","martedi":"Marted\u00ec","mercoledi":"Mercoled\u00ec","giovedi":"Gioved\u00ec","venerdi":"Venerd\u00ec","sabato":"Sabato","domenica":"Domenica","votaNegozio":"Vota il negozio","portamiQui":"Portami qui","mostra":"mostra","nascondi":"nascondi","postPubblicato":"Post pubblicato","tweetPubblicato":"Tweet pubblicato","checkinPubblicato":"Check-in pubblicato","noCheckin":"Non sei nelle vicinanze di questo negozio!","noRisultatiVicini":"Non ci sono risultati nelle vicinanze","noRisultatiBrand":"Nessun brand corrisponde alla ricerca","noRisultatiNome":"Nessun esercizio corrisponde alla ricerca","vicinoA":"Ora sei vicino a","troppoLontano":"troppo lontano per calcolare","collegaSetupTitolo":"Collegati con","collegaSetupDescrizione":"Puoi collegare ShopInComo con i Social Network per votare i tuoi negozi preferiti","collegaSocial":"Collega ShopInComo al mio account","noCollegaSocial":"Non ora","accountCollegato":"Account Collegato","prossimoPasso":"Prossimo step","placeholderNome":"Inserisci il nome di un negozio (almeno 3 lettere)","placeholderBrand":"Inserisci un brand (almeno 3 lettere)","linguaApp":"Lingua","cambiaLinguaApp":"Cambia lingua","aggiorna":"Aggiorna","aggiornaDatabaseApp":"Aggiorna il database degli esercizi","statusDatabase":"Non sono disponibili aggiornamenti","aggiornamentoCompletato":"Aggiornamento completato","aggiornamentiDisponibili":"Aggiornamenti disponibili","aggiornamentiPopupDescrizione":"Sono disponibili aggiornamenti per gli esercizi"},"English":{"idLingua":"2","codiceLingua":"en","nomeLingua":"English","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Francaise":{"idLingua":"3","codiceLingua":"fr","nomeLingua":"Francaise","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Spanish":{"idLingua":"4","codiceLingua":"es","nomeLingua":"Spanish","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Portuguese":{"idLingua":"5","codiceLingua":"pt","nomeLingua":"Portuguese","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Russian":{"idLingua":"6","codiceLingua":"ru","nomeLingua":"Russian","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Japanese":{"idLingua":"7","codiceLingua":"ja","nomeLingua":"Japanese","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Chinese":{"idLingua":"8","codiceLingua":"zh-hans","nomeLingua":"Chinese","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"},"Arabic":{"idLingua":"9","codiceLingua":"ar","nomeLingua":"Arabic","nome":"Name","nomiEsercizi":"shopNames","position":"shopPosition","categorie":"categories","esercizi":"shops","sottoCategorie":"subcategories","brandEsercizi":"shopBrand","downloadFunzionalita":"Download functionalities","downloadEsercizi":"Download Shops","attendere":"wait","continua":"Next","localizzando":"Geolocating","noLocalizzazione":"Geolocation fail. Default position city center","salta":"Skip","chiudi":"Close","vota":"Vote","voti":"Votes","essereOnline":"Must be connected to WiFi or 3g to use this functionality","onlineSetup":"Il collegamento WiFi o 3g \u00e8 necessario per il setup della App","distanza":"Distance","votoTrendy":"Trendy","votoPopular":"Popular","tutti":"All","giorni":"days","noStatistiche":"Shoopkeeper does not allow public viewing of statistics","contatti":"Contacts","telefono":"Phone","orariApertura":"Opening Hours","noOrari":"Opening hours not available","lunedi":"Monday","martedi":"Tuesday","mercoledi":"Wednesday","giovedi":"Thursday","venerdi":"Friday","sabato":"Saturday","domenica":"Sunday","votaNegozio":"Vote shop","portamiQui":"Bring me here","mostra":"show","nascondi":"hide","postPubblicato":"Post published","tweetPubblicato":"Tweet published","checkinPubblicato":"Check-in published","noCheckin":"Not near this shop!","troppoLontano":"too far to calculate","noRisultatiVicini":"No results nearby","noRisultatiBrand":"No results available","noRisultatiNome":"No results available","vicinoA":"Now you are close to","collegaSetupTitolo":"Connect with","collegaSetupDescrizione":"You can connect ShopInComo with Social Network to vote your favorites shops","collegaSocial":"Connect ShopInComo with my account","noCollegaSocial":"Skip now","accountCollegato":"Account Connected","prossimoPasso":"Next Step","placeholderNome":"Insert shop name (at least 3 characters)","placeholderBrand":"Insert a brand (at least 3 characters)","linguaApp":"Language","cambiaLinguaApp":"Change language","aggiorna":"Update","aggiornaDatabaseApp":"Update shop database","statusDatabase":"No updates available","aggiornamentoCompletato":"Update complete","aggiornamentiDisponibili":"Updates available","aggiornamentiPopupDescrizione":"Updates available for shops in Application"}}';
	var lingue = JSON.parse(fileLingueJson);
			
	window.localStorage.setItem("nome", lingue[lingua].nome);
	window.localStorage.setItem("nomiEsercizi", lingue[lingua].nomiEsercizi);
	window.localStorage.setItem("position", lingue[lingua].position);
	window.localStorage.setItem("categorie", lingue[lingua].categorie);
	window.localStorage.setItem("esercizi", lingue[lingua].esercizi);
	window.localStorage.setItem("sottoCategorie", lingue[lingua].sottoCategorie);
	window.localStorage.setItem("brandEsercizi", lingue[lingua].brandEsercizi);
	window.localStorage.setItem("downloadFunzionalita", lingue[lingua].downloadFunzionalita);
	window.localStorage.setItem("downloadEsercizi", lingue[lingua].downloadEsercizi);
	window.localStorage.setItem("attendere", lingue[lingua].attendere);
	window.localStorage.setItem("continua", lingue[lingua].continua);
	window.localStorage.setItem("localizzando", lingue[lingua].localizzando);
	window.localStorage.setItem("noLocalizzazione", lingue[lingua].noLocalizzazione);
	window.localStorage.setItem("salta", lingue[lingua].salta);
	window.localStorage.setItem("chiudi", lingue[lingua].chiudi);
	window.localStorage.setItem("vota", lingue[lingua].vota);
	window.localStorage.setItem("voti", lingue[lingua].voti);
	window.localStorage.setItem("essereOnline", lingue[lingua].essereOnline);
	window.localStorage.setItem("onlineSetup", lingue[lingua].onlineSetup);
	window.localStorage.setItem("distanza", lingue[lingua].distanza);
	window.localStorage.setItem("votoTrendy", lingue[lingua].votoTrendy);
	window.localStorage.setItem("votoPopular", lingue[lingua].votoPopular);
	window.localStorage.setItem("tutti", lingue[lingua].tutti);
	window.localStorage.setItem("giorni", lingue[lingua].giorni);
	window.localStorage.setItem("noStatistiche", lingue[lingua].noStatistiche);
	window.localStorage.setItem("contatti", lingue[lingua].contatti);
	window.localStorage.setItem("telefono", lingue[lingua].telefono);
	window.localStorage.setItem("orariApertura", lingue[lingua].orariApertura);
	window.localStorage.setItem("noOrari", lingue[lingua].noOrari);
	window.localStorage.setItem("lunedi", lingue[lingua].lunedi);
	window.localStorage.setItem("martedi", lingue[lingua].martedi);
	window.localStorage.setItem("mercoledi", lingue[lingua].mercoledi);
	window.localStorage.setItem("giovedi", lingue[lingua].giovedi);
	window.localStorage.setItem("venerdi", lingue[lingua].venerdi);
	window.localStorage.setItem("sabato", lingue[lingua].sabato);
	window.localStorage.setItem("domenica", lingue[lingua].domenica);
	window.localStorage.setItem("votaNegozio", lingue[lingua].votaNegozio);
	window.localStorage.setItem("portamiQui", lingue[lingua].portamiQui);
	window.localStorage.setItem("mostra", lingue[lingua].mostra);
	window.localStorage.setItem("nascondi", lingue[lingua].nascondi);
	window.localStorage.setItem("postPubblicato", lingue[lingua].postPubblicato);
	window.localStorage.setItem("tweetPubblicato", lingue[lingua].tweetPubblicato);
	window.localStorage.setItem("checkinPubblicato", lingue[lingua].checkinPubblicato);
	window.localStorage.setItem("noCheckin", lingue[lingua].noCheckin);
	window.localStorage.setItem("troppoLontano", lingue[lingua].troppoLontano);
	window.localStorage.setItem("noRisultatiVicini", lingue[lingua].noRisultatiVicini);
	window.localStorage.setItem("noRisultatiBrand", lingue[lingua].noRisultatiBrand);
	window.localStorage.setItem("noRisultatiNome", lingue[lingua].noRisultatiNome);
	window.localStorage.setItem("vicinoA", lingue[lingua].vicinoA);
	window.localStorage.setItem("collegaSetupTitolo", lingue[lingua].collegaSetupTitolo);
	window.localStorage.setItem("collegaSetupDescrizione", lingue[lingua].collegaSetupDescrizione);
	window.localStorage.setItem("collegaSocial", lingue[lingua].collegaSocial);
	window.localStorage.setItem("noCollegaSocial", lingue[lingua].noCollegaSocial);
	window.localStorage.setItem("accountCollegato", lingue[lingua].accountCollegato);
	window.localStorage.setItem("prossimoPasso", lingue[lingua].prossimoPasso);
	window.localStorage.setItem("placeholderNome", lingue[lingua].placeholderNome);
	window.localStorage.setItem("placeholderBrand", lingue[lingua].placeholderBrand);
	window.localStorage.setItem("linguaApp", lingue[lingua].linguaApp);
	window.localStorage.setItem("cambiaLinguaApp", lingue[lingua].cambiaLinguaApp);
	window.localStorage.setItem("aggiorna", lingue[lingua].aggiorna);
	window.localStorage.setItem("aggiornaDatabaseApp", lingue[lingua].aggiornaDatabaseApp);
	window.localStorage.setItem("statusDatabase", lingue[lingua].statusDatabase);
	window.localStorage.setItem("aggiornamentoCompletato", lingue[lingua].aggiornamentoCompletato);
	window.localStorage.setItem("aggiornamentiDisponibili", lingue[lingua].aggiornamentiDisponibili);
	window.localStorage.setItem("aggiornamentiPopupDescrizione", lingue[lingua].aggiornamentiPopupDescrizione);
		
	
	// /TRADUZIONI----------------------------------------------------------------------------
	
	$.mobile.changePage( "#setupCategorieLingua", { allowSamePageTransition:true, transition: "slide" } );
	}
	else{
	$( "#connectionOfflineLingua" ).popup("open");
	}
		
	}); //ON "click"
	
	$(document).on("click", 'a.closePopup', function(){
		
		$( "#connectionOfflineLingua" ).popup("close");
		
	});
	
		</script>
		
		<ul data-role="listview" id="listaLingue" data-inset="true">
		</ul>
		
		<div data-role="popup" id="connectionOfflineLingua" data-dismissible="false" data-history="false">
		<p class="headerOffline">OFFLINE</p>
        <p class="descrizioneOffline"></p>
		<a href="#" class="ui-btn closePopup"></a>
		</div>
	
		</div>
		<!-- /CONTENT -->

		<!-- FOOTER -->
		<div data-role="footer" data-theme="a" data-position="fixed"><h4></h4></div>
		<!-- /FOOTER -->
		
		</div>
<!-- /PAGE #lingua -->


<!-- PAGE #setupCategorieLingua -->
	<div data-role="page" id="setupCategorieLingua">

	<!-- /HEADER -->
	<div data-role="header" data-position="fixed" data-tap-toggle="false">
		<h1></h1>
	</div>
	<!-- /HEADER -->
	
	<!-- CONTENT -->
	<div role="main" class="ui-content" >
	
	<script>   
	$( "#setupCategorieLingua" ).on( "pageshow", function() {	
	
	document.addEventListener("backbutton", onBackKeyDown, false);
		
	function onBackKeyDown(e) {
	e.preventDefault();
	}
	
	$("h3.titoloDownloadFunzionalita").html(window.localStorage.getItem("downloadFunzionalita"));
	$("ul.downloadList").append($('<li class="'+window.localStorage.getItem("nomiEsercizi")+'"><img class="iconaTipologia" src="img/downloadnome.png"> DOWNLOAD '+window.localStorage.getItem("nomiEsercizi")+'... <img src="img/download.gif"></li>'));
	$("ul.downloadList").append($('<li class="brand"><img class="iconaTipologia" src="img/downloadbrand.png"> DOWNLOAD brand... <img src="img/download.gif"></li>'));
	$("ul.downloadList").append($('<li class="'+window.localStorage.getItem("brandEsercizi")+'"><img class="iconaTipologia" src="img/downloadbrandEsercizi.png"> DOWNLOAD '+window.localStorage.getItem("brandEsercizi")+'... <img src="img/download.gif"></li>'));
	$("ul.downloadList").append($('<li class="'+window.localStorage.getItem("position")+'"><img class="iconaTipologia" src="img/downloadposition.png"> DOWNLOAD position... <img src="img/download.gif"></li>'));
	$("ul.downloadList").append($('<li class="categorie"><img class="iconaTipologia" src="img/downloadCategorie.png"> DOWNLOAD '+window.localStorage.getItem("categorie")+'...<img src="img/download.gif"></li>'));
	$("ul.downloadList").append($('<li class="sottocategorie"><img class="iconaTipologia" src="img/downloadSottocategorie.png"> DOWNLOAD '+window.localStorage.getItem("sottoCategorie")+'...<img src="img/download.gif"></li>'));
	
	var codLingua = window.localStorage.getItem('codLingua');
	var downloadCompletati = 0;

	//DOWNLOAD FILE CATEGORIE
	
	var urlCategorie = encodeURI("http://shopincomo.comune.como.it/ccn20/JSONcategorie.php?language="+codLingua+"");
	var dataName = "jsonCategorie";
	var dataClass = ""+window.localStorage.getItem("categorie")+"";
	var dataImg = "downloadCategorie";
	
	downloadData(urlCategorie, dataName, dataClass, dataImg);
	
	//DOWNLOAD FILE SOTTOCATEGORIE
	
	var dataClass = ""+window.localStorage.getItem("sottoCategorie")+"";
	var dataImg = "downloadSottocategorie";
	
	//downloadSottocategorie(dataClass, dataImg);
	
	//DOWNLOAD FILE NOME ESERCIZI
	
	var urlnomeEsercizi = encodeURI("http://shopincomo.comune.como.it/ccn20/JSONnomeEsercizi.php");	
	var dataName = "jsonNomeEsercizi";
	var dataClass = ""+window.localStorage.getItem("nomiEsercizi")+"";
	var dataImg = "downloadnome";
	
	downloadData(urlnomeEsercizi, dataName, dataClass, dataImg);
	
	//DOWNLOAD FILE POSIZIONE
	
	var urlposition = encodeURI("http://shopincomo.comune.como.it/ccn20/JSONposition.php");	
	var dataName = "jsonPosizioneEsercizi";
	var dataClass = ""+window.localStorage.getItem("position")+"";
	var dataImg = "downloadposition";
	
	downloadData(urlposition, dataName, dataClass, dataImg);
	
	//DOWNLOAD FILE BRAND
	
	var urlbrand = encodeURI("http://shopincomo.comune.como.it/ccn20/JSONbrand.php");	
	var dataName = "jsonBrand";
	var dataClass = "brand";
	var dataImg = "downloadbrand";
	
	downloadData(urlbrand, dataName, dataClass, dataImg);
		
	//DOWNLOAD FILE BRAND ESERCIZI
	
	var urlbrandEsercizi = encodeURI("http://shopincomo.comune.como.it/ccn20/JSONbrandEsercizi.php");
	var dataName = "jsonBrandEsercizi";
	var dataClass = ""+window.localStorage.getItem("brandEsercizi")+"";
	var dataImg = "downloadbrandEsercizi";
	
	downloadData(urlbrandEsercizi, dataName, dataClass, dataImg);

	
	
	function downloadData(dataUrl, dataName, dataClass, dataImg){
	
		$.getJSON(dataUrl)
		.done(function(data) {
		
			window.localStorage.setItem(''+dataName+'', JSON.stringify(data));
			
			if(dataName == "jsonCategorie"){
				
				//DOWNLOAD FILE SOTTOCATEGORIE
				var dataClassSottocategorie = ""+window.localStorage.getItem("sottoCategorie")+"";
				var dataImgSottocategorie = "downloadSottocategorie";
				downloadSottocategorie(dataClassSottocategorie, dataImgSottocategorie);
				
			}
			
			$("li."+dataClass+"").html("<img class='iconaTipologia' src='img/"+dataImg+".png'> DOWNLOAD "+dataClass+"");
			$("li."+dataClass+"").css("color","white");
			$("li."+dataClass+"").css("background","#00CC00");
			
			downloadCompletati = parseInt(downloadCompletati)+1;
			
			if(downloadCompletati == 6){
				$("p.downloadComplete").html("<a href='#setupNegoziLingua' class='ui-btn' data-transition='slide'>"+window.localStorage.getItem("continua")+"</a>");
			}
			
			
		}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
			downloadData(dataUrl, dataName, dataClass, dataImg) 
		}); // ajax
	
	}
	
	function downloadSottocategorie(dataClass, dataImg){
	
		var categorie = JSON.parse(window.localStorage.getItem('jsonCategorie'));
		var numeroCategorie = categorie.length;
		
		$.each(categorie, function(index,info) {
		
			numeroCategorie = parseInt(numeroCategorie)-1;
			
			if(numeroCategorie == 0){
			
				$("li."+dataClass+"").html("<img class='iconaTipologia' src='img/"+dataImg+".png'> DOWNLOAD "+dataClass+"");
				$("li."+dataClass+"").css("color","white");
				$("li."+dataClass+"").css("background","#00CC00");
				
				downloadCompletati = parseInt(downloadCompletati)+1;
				
				if(downloadCompletati == 6){
					$("p.downloadComplete").html("<a href='#setupNegoziLingua' class='ui-btn' data-transition='slide'>"+window.localStorage.getItem("continua")+"</a>");
				}
			
			}
			else {
				var idCategoria = info.idCategoria;
				var jsonName = info.jsonName;
				
				var urlSottocategorie = encodeURI("http://shopincomo.comune.como.it/ccn20/JSONsottocategorieNegozi.php?idCategoria="+info.idCategoria+"&language="+codLingua+"");
				var dataName = "json"+info.jsonName+"";
				
				downloadSottocategoria(urlSottocategorie, dataName);
			}
		
		});
		
	}
	
	function downloadSottocategoria(urlSottocategorie, dataName){
	

				
		$.getJSON(urlSottocategorie)
		.done(function(data) {
			window.localStorage.setItem(''+dataName+'', JSON.stringify(data));
						
		}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
			downloadSottocategoria(urlSottocategorie, dataName); 
		}); // ajax
	
	}
	
	}); // ON "pageshow"
	
	</script>
	
	<h3 class="titoloDownloadFunzionalita"></h3>
	
	<ul class="downloadList">
	</ul>
	
	<p class="downloadComplete"><img src="img/download.gif"></p>
	
	</div>
	<!-- CONTENT -->

	<!-- FOOTER -->
	<div data-role="footer" data-position="fixed" data-tap-toggle="false">
		<h4></h4>
	</div>
	<!-- /FOOTER -->

</div>
<!-- /PAGE #setupCategorieLingua -->

<!-- PAGE #setupNegoziLingua -->
	<div data-role="page" id="setupNegoziLingua">

	<!-- /HEADER -->
	<div data-role="header" data-position="fixed" data-tap-toggle="false">
		<h1></h1>
	</div>
	<!-- /HEADER -->
	
	<!-- CONTENT -->
	<div role="main" class="ui-content" >
	
	<script>   
	$( "#setupNegoziLingua" ).on( "pageshow", function() {	
	
	document.addEventListener("backbutton", onBackKeyDown, false);
		
	function onBackKeyDown(e) {
	e.preventDefault();
	}
	
	$("h3.titoloDownloadEsercizi").html(window.localStorage.getItem("downloadEsercizi"));
	
	var jsonIdEsercizi = JSON.parse(window.localStorage.getItem("jsonNomeEsercizi"));
	var numeroEsercizi = jsonIdEsercizi.length;
	var codLingua = window.localStorage.getItem('codLingua');
	var numeroBlocchiDownload = Math.floor(numeroEsercizi/20);
	var widthBlocchiDownload = 100/numeroBlocchiDownload;
	var startInterval = 0;
	var iteration = 1;
	var countVetrine = 0;
	
	window.sessionStorage.setItem("startInterval", 0);
	window.sessionStorage.setItem("iteration", 1);
	
	
	for (i=1; i<=numeroBlocchiDownload; i++) {
		$("div.progressBar").append("<div class='"+i+"' style='width:"+widthBlocchiDownload.toFixed(2)+"%; height:40px; float:left'></div>");
	}
	
	downloadVetrine(numeroEsercizi);
	

	function downloadVetrine(numeroEsercizi) {
	
	var lastDownload = new Date();
	var lastDownload = lastDownload.getTime();
	window.localStorage.setItem('lastDownload', lastDownload);
	
	var startInterval = window.sessionStorage.getItem("startInterval");
	
	var urlIdEsercizi = encodeURI("http://shopincomo.comune.como.it/ccn20/JSONidEsercizi.php?start="+startInterval+"&end=20");
	
	$.getJSON(urlIdEsercizi)
	.done(function(data) {	
		$.each(data, function(index, info) {
		var urlVetrinaEsercizio = encodeURI("http://shopincomo.comune.como.it/ccn20/JSONvetrinaEsercizio.php?language="+codLingua+"&idEsercizio="+info.idEsercizio+"");
		var dataName = "json"+info.idEsercizio+"";
		downloadVetrinaEsercizio(urlVetrinaEsercizio, dataName, numeroEsercizi)
		});				
	}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
		downloadVetrine(numeroEsercizi);
	}); // ajax
		
	}//FUNCTION INTERVAL VETRINE
	
	
	
	function downloadVetrinaEsercizio(urlVetrinaEsercizio, dataName, numeroEsercizi){
	
	var iteration = window.sessionStorage.getItem("iteration");
	
	$.getJSON(urlVetrinaEsercizio)
	.done(function(data) {
		countVetrine = parseInt(countVetrine)+1;
		window.sessionStorage.setItem("startInterval", countVetrine);
		
		window.localStorage.setItem(''+dataName+'', JSON.stringify(data));
		if(countVetrine == numeroEsercizi){
			$("p.downloadCompleteVetrina").html("<a href='#opzioni' class='ui-btn' data-transition='slide'>"+window.localStorage.getItem("continua")+"</a>");
		}
		else if (countVetrine == parseInt(iteration)*20){
			$("div."+iteration+"").css("background","#00CC00");	
			iteration = parseInt(iteration)+1;
			window.sessionStorage.setItem("iteration", iteration);
			downloadVetrine(numeroEsercizi);
		}			
	}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
		downloadVetrinaEsercizio(urlVetrinaEsercizio, dataName, numeroEsercizi)
	}); // ajax
	
	}
	
	/*
	function storageSize(){
	
	var total = 0;
	for(var x in localStorage) {
	  var amount = (localStorage[x].length * 2) / 1024 / 1024;
	  total += amount;
	}
	alert( "Total: " + total.toFixed(2) + " MB");
	
	}
	*/
	
	}); // ON "pageshow"
	
	</script>
	
	<h3 class="titoloDownloadEsercizi"></h3>
	
	<div class="progressBar" style="width: 100%; height: 40px; background:#C0C0C0">
	</div>
		
	<!--
	<ul style="list-style-type: none">
	<li class="downloadVetrine">download vetrine...<img src="img/download.gif"></li>
	</ul>
	-->
	
	<p class="downloadCompleteVetrina"><img src="img/download.gif"></p>
	
	</div>
	<!-- CONTENT -->

	<!-- FOOTER -->
	<div data-role="footer" data-position="fixed" data-tap-toggle="false">
		<h4></h4>
	</div>
	<!-- /FOOTER -->

</div>
<!-- /PAGE #setupNegoziLingua -->

<!-- PAGE #database -->
		<div data-role="page" id="database">

		<!-- /HEADER -->
		<div data-role="header">
		<h1></h1>
		<a href="#opzioni" class="ui-btn ui-icon-gear ui-btn-icon-notext ui-alt-icon ui-nodisc-icon" data-transition="slide" data-direction="reverse">indietro</a>
		</div>
		<!-- /HEADER -->
	
		<!-- CONTENT -->
		<div role="main" class="ui-content" >
		
		<script>
		
		$( "#database" ).on( "pageshow", function() {	
		
		document.addEventListener("backbutton", onBackKeyDown, false);
		
		function onBackKeyDown(e) {
		e.preventDefault();
		}
		
		$("p.countUpdates").html("");
		$("a.updateDatabase").html("");
		
		$("p.descrizioneOffline").html(window.localStorage.getItem("essereOnline"));
		$("a.closePopup").html(window.localStorage.getItem("chiudi"));
		
		var	connectionStatus = navigator.onLine ? 'online' : 'offline';
		if (connectionStatus == "online")
		{
			eserciziUpdate();
			
			$.mobile.loading( "show", {
				text: "Check Updates",
				textVisible: true,
				theme: "a",
				textonly: false
			});
		}
		else{
			$( "#connectionOfflineUpdate" ).popup("open");
		}
		
	function eserciziUpdate(){
	
		var dataDownload = Math.round(localStorage.getItem("lastDownload")/ 1000);
		var jsonUpdate = encodeURI("http://shopincomo.comune.como.it/ccn20/JSONidEserciziUpdate.php?language="+localStorage.getItem("codLingua")+"&dataDownload="+dataDownload+"");
					
		$.getJSON(jsonUpdate)
		.done(function(data) {
			if(data.length == 0)
			{
				$("p.countUpdates").html(""+window.localStorage.getItem("statusDatabase")+"");
				$.mobile.loading( "hide" );
			}
			else {
				$("p.countUpdates").html(numeroAggiornamenti+" "+window.localStorage.getItem("aggiornamentiDisponibili")+"");
				$( "div#update" ).html("<a href='aggiornaDatabase.html' rel='external' class='ui-btn' data-transition='slide'>UPDATE</a>");
				$.mobile.loading( "hide" );
			}
			
		}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
			eserciziUpdate(); 
		}); // ajax

		
	} // end of eserciziUpdate

				
	}); //ON pageshow
		
	
	//ON "click"
	$(document).on("click", 'a.updateDatabase', function(){
	$.mobile.changePage( "aggiornaDatabase.html", { reloadPage: true, transition: "slide"} );
	
	}); //ON "click"
	
	
		</script>
		
		<p class="countUpdates"></p>
		<div id="update"></div>
		
		<div data-role="popup" id="connectionOfflineUpdate" data-dismissible="false" data-history="false">
		<p class="headerOffline">OFFLINE</p>
        <p class="descrizioneOffline"></p>
		<a href="#opzioni" class="ui-btn closePopup" data-transition="slide" data-direction="reverse"></a>
		</div>
		
		</div>
		<!-- /CONTENT -->

		<!-- FOOTER -->
		<div data-role="footer" data-theme="a" data-position="fixed"><h4></h4></div>
		<!-- /FOOTER -->
		
		</div>
<!-- /PAGE #database -->

</body>
</html>